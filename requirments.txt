Why Random Forest?
	‚Ä¢	Works well with structured banking data
	‚Ä¢	Handles non-linear relationships
	‚Ä¢	Produces probability scores
	‚Ä¢	Good for classification problems

‚∏ª

Training Process
	1.	Load merged dataset
	2.	Create target column ‚Üí Next_Best_Product
	3.	Select features
	4.	Encode Town using get_dummies
	5.	Train model
	6.	Save:
	‚Ä¢	nbp_model.pkl
	‚Ä¢	input_features.pkl

‚∏ª

üìä 4Ô∏è‚É£ Feature Engineering Logic

These are the features used:
	‚Ä¢	Age
	‚Ä¢	FD_Total_Amount
	‚Ä¢	FD_Avg_Rate
	‚Ä¢	Loan_Total
	‚Ä¢	Loan_Avg_Rate
	‚Ä¢	Salary
	‚Ä¢	Town (converted to dummy variables)

Example:

If town = Colombo
Town_Colombo = 1
Town_Kandy = 0
Town_Galle = 0
üéØ 5Ô∏è‚É£ Prediction Logic (Very Important)

When you click ‚ÄúGenerate Recommendation‚Äù:
	1.	Inputs are collected
	2.	They are converted into the same feature format used during training
	3.	Missing columns are filled with 0
	4.	Model runs:model.predict_proba(X)
üìà 6Ô∏è‚É£ How Probabilities Are Calculated

Random Forest:
	‚Ä¢	Creates many decision trees
	‚Ä¢	Each tree votes for a class
	‚Ä¢	Probability = percentage of trees voting for that class

Example:

200 trees:
	‚Ä¢	126 trees ‚Üí Savings
	‚Ä¢	73 trees ‚Üí FD
	‚Ä¢	1 tree ‚Üí Wealth

So:

Savings = 126 / 200 = 0.63 = 63%

That‚Äôs why you see 63.20%

This is REAL probability from the trained model.

‚∏ª

üéØ 7Ô∏è‚É£ Purpose Alignment Logic (Very Important)

You added logic:

If customer selects:
	‚Ä¢	Loan
	‚Ä¢	FD
	‚Ä¢	Savings

The system tries to find a label that matches that purpose.

Example:

If user selects Loan:if "loan" in label.lower()
If found ‚Üí show that as main recommendation.

If not found ‚Üí show highest probability class.

This prevents wrong alignment issues.
If found ‚Üí show that as main recommendation.

If not found ‚Üí show highest probability class.

This prevents wrong alignment issues.
If found ‚Üí show that as main recommendation.

If not found ‚Üí show highest probability class.

This prevents wrong alignment issues.
üí∞ 8Ô∏è‚É£ EMI Simulation (Loan Only)

When Loan is selected, EMI is calculated.

Formula used:

EMI formula:

EMI = P √ó r √ó (1+r)^n / ((1+r)^n - 1)

Where:

P = principal (loan amount)
r = monthly interest rate
n = tenure in months

Monthly rate:

r = annual_rate / 12 / 100

Example:

Loan = 500,000
Interest = 14%
Tenure = 36 months

EMI ‚âà 17,088 LKR

This is financial mathematics, not ML.

This gives real financial simulation.

‚∏ª

üìã 9Ô∏è‚É£ Action Plan Logic (FULL DETAILED EXPLANATION)

The action plan is based on the predicted product.

The system checks:soft_actions(product_label)
üü¢ If Product = Loan

Outputs can include:

Offer:
	‚Ä¢	Personal loan
	‚Ä¢	SME loan
	‚Ä¢	FD-secured loan
	‚Ä¢	Business expansion loan
	‚Ä¢	Salary-based loan

Bundle:
	‚Ä¢	Insurance add-on
	‚Ä¢	Credit protection cover
	‚Ä¢	Auto debit setup
	‚Ä¢	EMI auto-deduction
	‚Ä¢	Loan top-up eligibility
	‚Ä¢	FD pledge option

Actions:
	‚Ä¢	Run EMI simulation
	‚Ä¢	Share required document checklist
	‚Ä¢	Pre-approval check
	‚Ä¢	Credit scoring
	‚Ä¢	Risk profiling
	‚Ä¢	KYC update
	‚Ä¢	Schedule branch appointment
	‚Ä¢	Assign Relationship Manager

‚∏ª

üü¢ If Product = Savings

Offer:
	‚Ä¢	Savings account upgrade
	‚Ä¢	Recurring deposit
	‚Ä¢	Goal-based savings plan

Bundle:
	‚Ä¢	Auto-transfer from salary
	‚Ä¢	FD maturity sweep
	‚Ä¢	Mobile banking alerts
	‚Ä¢	Standing order setup
	‚Ä¢	Child education savings plan

Actions:
	‚Ä¢	Set monthly savings target
	‚Ä¢	Setup auto debit
	‚Ä¢	Send digital brochure
	‚Ä¢	Financial planning session

‚∏ª

üü¢ If Product = FD

Offer:
	‚Ä¢	Fixed Deposit
	‚Ä¢	Senior Citizen FD
	‚Ä¢	Short-term FD
	‚Ä¢	Tax saving FD

Bundle:
	‚Ä¢	FD rollover option
	‚Ä¢	Interest payout choice (monthly/quarterly)
	‚Ä¢	Linked savings account
	‚Ä¢	Wealth consultation

Actions:
	‚Ä¢	Lock interest rate
	‚Ä¢	Schedule deposit opening
	‚Ä¢	Provide FD calculator
üü¢ If Product = Wealth / Investment

Offer:
	‚Ä¢	Mutual fund
	‚Ä¢	Treasury bill
	‚Ä¢	Investment portfolio

Bundle:
	‚Ä¢	Risk profiling
	‚Ä¢	Asset allocation plan
	‚Ä¢	Portfolio monitoring

Actions:
	‚Ä¢	Schedule RM meeting
	‚Ä¢	Provide investment brochure
	‚Ä¢	Start onboarding

‚∏ª

üìû 10Ô∏è‚É£ Officer Call Script Logic

The system auto-generates:
	‚Ä¢	Personalized greeting
	‚Ä¢	Product name
	‚Ä¢	Probability
	‚Ä¢	Purpose
	‚Ä¢	Call-to-action

Example:

‚ÄúBased on your profile (purpose: Loan), we have a suitable offer for you: Personal Loan (confidence ~ 63%).‚Äù

This reduces manual effort of officers.

‚∏ª

üñ• 11Ô∏è‚É£ What Exactly This System Outputs

Your system outputs:
	1.	Customer validation (existing/new)
	2.	Customer snapshot
	3.	Purpose selection
	4.	Dynamic input form
	5.	Top 3 product recommendations
	6.	Probability scores
	7.	Purpose-aligned recommendation
	8.	Cross-sell recommendations
	9.	Action plan
	10.	EMI simulation (loan only)
	11.	Copy-ready call script

This is a complete decision-support system.